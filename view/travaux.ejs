<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>travaux</title>
    <link rel="stylesheet" href="css/travaux.css">
    <link rel="stylesheet" href="css/culture.css">
    <link rel="stylesheet" href="css/class.css">
</head>
<body>
    
    <div id="container">
        
        <%- include('../public/composants/page_head.ejs') %>
        <div class="page_body">

            <%- include('../public/composants/header.ejs') %> 
            
            <% console.log(data); %>
            <h1 id="culture_titre">Champs de <%= data[0].culture %> de <%= data[0].village %></h1>

            <div id="culture_onglet">
                <span id="champs_info"><a href="info?lieu=<%= data[0].village %>&culture=<%= data[0].culture %>">Champs info</a></span>
                <span id="travaux"><a href="travaux?lieu=<%= data[0].village %>&culture=<%= data[0].culture %>">Travaux</a></span>
                <span id="comptes"><a href="comptes?lieu=<%= data[0].village %>&culture=<%= data[0].culture %>">Comptes d'exploitation</a></span>
            </div>

          <!-- --------------------------------------------------------------------------------------------------------------------------------------- -->
          
            <% let travaux_1 = []; %> 
            <% let travaux_2 = []; %>
            <% let travaux_3 = []; %>
            <% let travaux_4 = []; %>
          
            <% let totaux_1 = 0; %>  <% let totaux_5 = 0; %>  <% let totaux_9 = 0; %>   <% let totaux_13 = 0; %>
            <% let totaux_2 = 0; %>  <% let totaux_6 = 0; %>  <% let totaux_10 = 0; %>  <% let totaux_14 = 0; %>
            <% let totaux_3 = 0; %>  <% let totaux_7 = 0; %>  <% let totaux_11 = 0; %>  <% let totaux_15 = 0; %>
            <% let totaux_4 = 0; %>  <% let totaux_8 = 0; %>  <% let totaux_12 = 0; %>  <% let totaux_16 = 0; %>
          
            
            <% for(let i=0; i<data.length; i++) {
                if(data[i].etape === "Preparation du terrain") { 
                    travaux_1.push(data[i]);

                    totaux_1 += parseInt(data[i].personnel);
                    totaux_2 += parseInt(data[i].quantite.split(' ')[0]);
                    totaux_3 += parseInt(data[i].duree.split(' ')[0]);
                    totaux_4 += parseInt(data[i].cout.split(' ')[0]);
                }
                if(data[i].etape === "Semis") { 
                    travaux_2.push(data[i]); 

                    totaux_5 += parseInt(data[i].personnel);
                    totaux_6 += parseInt(data[i].quantite.split(' ')[0]);
                    totaux_7 += parseInt(data[i].duree.split(' ')[0]);
                    totaux_8 += parseInt(data[i].cout.split(' ')[0]);
                }
                if(data[i].etape === "Travaux d'entretient") { 
                    travaux_3.push(data[i]); 

                    totaux_9 += parseInt(data[i].personnel);
                    totaux_10 += parseInt(data[i].quantite.split(' ')[0]);
                    totaux_11 += parseInt(data[i].duree.split(' ')[0]);
                    totaux_12 += parseInt(data[i].cout.split(' ')[0]);
                }
                if(data[i].etape === "Recolte") { 
                    travaux_4.push(data[i]); 

                    totaux_13 += parseInt(data[i].personnel);
                    totaux_14 += parseInt(data[i].quantite.split(' ')[0]);
                    totaux_15 += parseInt(data[i].duree.split(' ')[0]);
                    totaux_16 += parseInt(data[i].cout.split(' ')[0]);
                }
            } %>
          
          <!-- --------------------------------------------------------------------------------------------------------------------------------------- -->

            <h3 id="culture_info_titre">Travaux du Champs de <%= data[0].culture %> No_ de <%= data[0].village %></h3>

            <div class="culture_fiches" id="culture_fiche_info">
                
                <br>

                <table id="tabke_des_travaux">
                    <tr>
                        <td>
                            <table>
                                <tr>
                                    <td class="td_titre"><h3>Travaux de Preparation du terrain</h3></td>
                                    <td>
                                        <form action="#">
                                            <label for="date_du_debut">Date du debut : </label>
                                            <input type="text" name="date_du_debut" id="date_du_debut" value="<%= data[0].date_du_debut %>">/
                                            <label for="date_de_fin">Date de fin : </label>
                                            <input type="text" name="date_de_fin" id="date_de_fin" value="<%= data[0].date_de_fin %>">
                                        </form>
                                    </td>
                                </tr>
                            </table>
                            <hr>
                            <table class="table_d_etape">
                                <tr>
                                    <th class="th_head" style="width: 6rem;">Date</th>
                                    <th class="th_head" style="width: 16rem;"> Activites</th>
                                    <th class="th_head" style="width: 4rem;">Quantite</th>
                                    <th class="th_head" style="width: 4rem;">Personnel</th>
                                    <th class="th_head" style="width: 4rem;">Duree</th>
                                    <th class="th_head" style="width: 6rem;">Cout</th>
                                </tr>
                                <% for(let i=0; i<travaux_1.length; i++) { %>
                                    <tr>
                                        <td><%= travaux_1[i].date %></td>
                                        <td><%= travaux_1[i].travail %></td>
                                        <td style="text-align: right;"><%= travaux_1[i].quantite %></td>
                                        <td style="text-align: right;"><%= travaux_1[i].personnel %></td>
                                        <td style="text-align: right;"><%= travaux_1[i].duree %></td>
                                        <td style="text-align: right;"><%= travaux_1[i].cout %></td>
                                    </tr>
                                <% } %>
                                <tr>
                                    <th colspan="3">Totaux</th>
                                    <th class="th_foot" style="text-align: right;"><%= totaux_1; %></th>
                                    <th class="th_foot" style="text-align: right;"><%= totaux_3; %> jour</th>
                                    <th class="th_foot" style="text-align: right;"><%= totaux_4; %> FG</th>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <table>
                                <tr><td class="td_titre"><h3>Travaux de Semis</h3></td></tr>
                            </table>
                            <hr>
                            <table class="table_d_etape">
                                <tr>
                                    <th class="th_head" style="width: 6rem;">Date</th>
                                    <th class="th_head" style="width: 16rem;"> Activites</th>
                                    <th class="th_head" style="width: 4rem;">Quantite</th>
                                    <th class="th_head" style="width: 4rem;">Personnel</th>
                                    <th class="th_head" style="width: 4rem;">Duree</th>
                                    <th class="th_head" style="width: 6rem;">Cout</th>
                                </tr>
                                <% for(let i=0; i<travaux_2.length; i++) { %>
                                    <tr>
                                        <td><%= travaux_2[i].date %></td>
                                        <td><%= travaux_2[i].travail %></td>
                                        <td style="text-align: right;"><%= travaux_2[i].quantite %></td>
                                        <td style="text-align: right;"><%= travaux_2[i].personnel %></td>
                                        <td style="text-align: right;"><%= travaux_2[i].duree %></td>
                                        <td style="text-align: right;"><%= travaux_2[i].cout %></td>
                                    </tr>
                                <% } %>
                                <tr>
                                    <th colspan="3">Totaux</th>
                                    <th class="th_foot" style="text-align: right;"><%= totaux_5; %></th>
                                    <th class="th_foot" style="text-align: right;"><%= totaux_7; %> jour</th>
                                    <th class="th_foot" style="text-align: right;"><%= totaux_8; %> FG</th>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <table>
                                <tr><td class="td_titre"><h3>Travaux d'entretient</h3></td></tr>
                            </table>
                            <hr>
                            <table class="table_d_etape">
                                <tr>
                                    <th class="th_head" style="width: 6rem;">Date</th>
                                    <th class="th_head" style="width: 16rem;"> Activites</th>
                                    <th class="th_head" style="width: 4rem;">Quantite</th>
                                    <th class="th_head" style="width: 4rem;">Personnel</th>
                                    <th class="th_head" style="width: 4rem;">Duree</th>
                                    <th class="th_head" style="width: 6rem;">Cout</th>
                                </tr>
                                <% for(let i=0; i<travaux_3.length; i++) { %>
                                    <tr>
                                        <td><%= travaux_3[i].date %></td>
                                        <td><%= travaux_3[i].travail %></td>
                                        <td style="text-align: right;"><%= travaux_3[i].quantite %></td>
                                        <td style="text-align: right;"><%= travaux_3[i].personnel %></td>
                                        <td style="text-align: right;"><%= travaux_3[i].duree %></td>
                                        <td style="text-align: right;"><%= travaux_3[i].cout %></td>
                                    </tr>
                                <% } %>
                                <tr>
                                    <th colspan="3">Totaux</th>
                                    <th class="th_foot" style="text-align: right;"><%= totaux_9; %></th>
                                    <th class="th_foot" style="text-align: right;"><%= totaux_11; %> jour</th>
                                    <th class="th_foot" style="text-align: right;"><%= totaux_12; %> FG</th>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <table>
                                <tr><td class="td_titre"><h3>Travaux de Recolte</h3></td></tr>
                            </table>
                            <hr>
                            <table class="table_d_etape">
                                <tr>
                                    <th class="th_head" style="width: 6rem;">Date</th>
                                    <th class="th_head" style="width: 16rem;"> Activites</th>
                                    <th class="th_head" style="width: 4rem;">Quantite</th>
                                    <th class="th_head" style="width: 4rem;">Personnel</th>
                                    <th class="th_head" style="width: 4rem;">Duree</th>
                                    <th class="th_head" style="width: 6rem;">Cout</th>
                                </tr>
                                <% for(let i=0; i<travaux_4.length; i++) { %>
                                    <tr>
                                        <td><%= travaux_4[i].date %></td>
                                        <td><%= travaux_4[i].travail %></td>
                                        <td style="text-align: right;"><%= travaux_4[i].quantite %></td>
                                        <td style="text-align: right;"><%= travaux_4[i].personnel %></td>
                                        <td style="text-align: right;"><%= travaux_4[i].duree %></td>
                                        <td style="text-align: right;"><%= travaux_4[i].cout %></td>
                                    </tr>
                                <% } %>
                                <tr>
                                    <th colspan="3">Totaux</th>
                                    <th class="th_foot" style="text-align: right;"><%= totaux_13; %></th>
                                    <th class="th_foot" style="text-align: right;"><%= totaux_15; %> jour</th>
                                    <th class="th_foot" style="text-align: right;"><%= totaux_16; %> FG</th>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>

                <hr>
                <form action="#">

                    <label for="date">Date : </label>
                    <input type="text" name="date" id="date" value="<%= data[0].date %>"><br>

                    <label for="travail">Activites : </label>
                    <input type="text" name="travail" id="travail" value="<%= data[0].travail %>"><br>

                    <label for="personnel">Personnel :</label>
                    <input type="text" name="personnel" id="personnel" value="<%= data[0].personnel %>">

                    <label for="quantite">Volume de travail :</label>
                    <input type="text" name="quantite" id="quantite" value="<%= data[0].quantite %>">

                    <label for="Duree">Duree de travail :</label>
                    <input type="text" name="Duree" id="Duree" value="<%= data[0].Duree %>">

                    <label for="cout">Cout de travail :</label>
                    <input type="text" name="cout" id="cout" value="<%= data[0].cout %>">

                </form>
            </div>

        </div>
    </div>
</body>
</html>