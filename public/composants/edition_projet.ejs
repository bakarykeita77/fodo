
<div class="editeur">
    <span class="fermeture" id="fermer_edition_projet">&times;</span>

    <table id="editer_table_projet"> 
        <form action="/projet" method="post">

            <tr>
                <tr id="tr_1">
                    <th style="display:none"></th>
                    <th style="display:none"></th>
                    <th><label for="input_2">No</label></th>
                    <th><label for="input_3">Taches</label>
                    <th><label for="input_4">Duree</label></th>
                    <th><label for="input_5">Debut</label></th>
                    <th><label for="input_6">Fin</label></th>
                    <th><label for="input_7">Moyen</label></th>
                    <th class="sans_bordure" width="16"></th>
                    <th id="th_7"><label for="input_9">Personnel</label></th>
                    <th id="th_8"><label for="input_10">Cout</label></th>
                </tr>
            </tr>

            <tr>
                <td style="display: none;"><input type="text" name="input_0" id="input_0" value=""></td>
                <td style="display: none;"><input type="text" name="input_1" id="input_1" value=""></td>
                <td><input type="text" name="input_2" id="input_2" value=""></td>
                <td><input type="text" name="input_3" id="input_3" value=""></td>
                <td><input type="text" name="input_4" id="input_4" value=""></td>
                <td><input type="text" name="input_5" id="input_5" value=""></td>
                <td><input type="text" name="input_6" id="input_6" value=""></td>
                <td><input type="text" name="input_7" id="input_7" value=""></td>
                <td class="sans_bordure"></td>
                <td><input type="text" name="input_9" class="td_chifre" id="input_9" value=""></td>
                <td><input type="text" name="input_10" class="td_chifre" id="input_10" value=""></td>
            </tr>




            <tr>
                <table><tr><td><input type="submit" name="submit" id="submit" value="Enregistrer les modifications"></td></tr></table>
            </tr>
        </form>
    </table>   
        
</div>

<style>
    
    #editer_table_projet input { 
        border-style: none; 
        background-color: transparent;
        padding: 0 0.5rem; 
    }
    #input_2 { width: 2rem; }
    #input_3 { width: 14rem; }
    #input_4 { width: 3rem; }
    #input_5 { width: 6rem; }
    #input_6 { width: 6rem; }
    #input_7 { width: 8rem; }
    #input_8 { width: 5rem; }
    #input_9 { width: 3rem; }
    #input_10 { width: 4rem; }
    th { text-align: left; }
    #editer_table_projet td { 
        border: 1px solid #fff; 
        background-color: #eee; 
        height: 2rem;
    }
    #tr_1 th { padding: 0.5rem; }
    #editer_table_projet .sans_bordure { border-color: #fff; background-color: transparent; }
    #submit { 
        border-style: none; 
        cursor: pointer;
        background-color: transparent;
    }
</style>

<script>
    
    let couvercle_edition_projet = document.getElementById('couvercle_edition_projet');
    let modifier_projet = document.querySelectorAll('.modifier_projet');
    let fermer_edition_projet = document.querySelector('#fermer_edition_projet');
    let inputs = document.querySelectorAll('#editer_table_projet td input');
    let id_champs = document.getElementById('id_champs');


    modifier_projet.forEach((element) => {
        element.addEventListener('click', () => { 

         // Afficher editeur de projet
            couvercle_edition_projet.style.display = 'block';

        // Selection des td consernes par les modifications
            let tr_id = element.parentElement.id;
            let tds   = document.querySelectorAll('#'+tr_id+' td');

        // Recuperation des valeurs a modifier dans des variables.    
            let id          = tds[0].textContent;
            let projet_name = tds[1].textContent;
            let no          = tds[2].textContent;
            let tache       = tds[3].textContent;
            let duree       = tds[4].textContent;
            let debut       = tds[5].textContent;
            let fin         = tds[6].textContent;
            let moyen       = tds[7].textContent;
            let personnel   = tds[9].textContent;
            let cout        = tds[10].textContent;

        // Insertion des valeurs a modifier dans les inputs de editer_projet.
            inputs[0].value = parseInt(id);
            inputs[1].value = projet_name;
            inputs[2].value = no;
            inputs[3].value = tache;
            inputs[4].value = duree;
            inputs[5].value = debut;
            inputs[6].value = fin;
            inputs[7].value = moyen;0
            inputs[8].value = personnel;
            inputs[9].value = cout;

        // Mettre en surbrillance la ligne selectionnee
            document.querySelectorAll('#'+tr_id+' td:not(.sans_bordure, .td_options)').forEach(element => {
                element.style.backgroundColor = 'yellow';
            });

            
        // Enlever la surbrillance sur la ligne selectionnee
            fermer_edition_projet.addEventListener('click', () => {
                setTimeout(() => {
                    document.querySelectorAll('#'+tr_id+' td:not(.sans_bordure, .td_options)').forEach(element => {
                        element.style.backgroundColor = 'white';
                    });
                }, 1000);
            });
            
        });
    });

    fermer_edition_projet.addEventListener('click', () => { couvercle_edition_projet.style.display = 'none'; });

</script>
